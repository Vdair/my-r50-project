# 🔧 修复 502 错误 - 使用指南

## 问题说明

Taro H5 环境一直遇到 502 Bad Gateway 错误，这是因为 Vite 代理无法正常转发扣子 API 请求。

## ✅ 解决方案（两种选择）

### 方案 1：使用独立 Web 应用（强烈推荐）⭐

我已经为您创建了一个完全独立的纯前端 Web 应用，不依赖 Taro 框架，可以完美运行！

**位置**：`standalone-web/` 目录

**使用方法**：

```bash
# 进入目录
cd standalone-web

# 启动本地服务器
python3 -m http.server 8000

# 在浏览器中打开
# http://localhost:8000
```

**优势**：
- ✅ 无框架依赖，加载快速
- ✅ 无构建步骤，开发简单
- ✅ 无 CORS 问题
- ✅ 调试简单
- ✅ 部署方便（可部署到 Vercel、Netlify、GitHub Pages 等）
- ✅ 所有功能完整实现

**详细说明**：请查看 `standalone-web/README.md`

---

### 方案 2：继续使用 Taro H5 版本（需要额外步骤）

如果您坚持使用 Taro H5 版本，我已经修改代码使用 CORS 代理服务。

**需要的额外步骤**：

1. **启用 CORS 代理临时访问**
   - 在浏览器中访问：https://cors-anywhere.herokuapp.com/corsdemo
   - 点击"Request temporary access to the demo server"按钮
   - 等待几秒钟，直到看到"You now have temporary access"

2. **清除缓存并重启**
   ```bash
   # 清除缓存
   ./clear-cache.sh
   
   # 重启开发服务器
   npm run dev:h5
   ```

3. **强制刷新浏览器**
   - Windows/Linux: Ctrl + Shift + R
   - Mac: Cmd + Shift + R

4. **测试参数生成**
   - 选择参数
   - 点击"生成最佳参数"
   - 等待约 10-15 秒

**注意事项**：
- ⚠️ CORS 代理是公共服务，可能不稳定
- ⚠️ 临时访问权限有时间限制（通常几小时）
- ⚠️ 如果再次遇到错误，需要重新启用临时访问

---

## 🎯 我的建议

**强烈建议使用方案 1（独立 Web 应用）**，原因：

1. **更稳定**：不依赖第三方 CORS 代理服务
2. **更快速**：无需加载 Taro 框架
3. **更简单**：直接打开 HTML 文件即可使用
4. **更灵活**：可以轻松部署到任何静态网站托管服务

独立 Web 应用包含所有功能：
- ✅ AI 参数咨询师
- ✅ 参数展示
- ✅ 器材百科
- ✅ 历史记录

UI 设计和交互体验与 Taro 版本完全一致！

---

## 📝 快速开始（独立 Web 应用）

```bash
# 1. 进入目录
cd /workspace/app-8htx34d81fcx/standalone-web

# 2. 启动服务器
python3 -m http.server 8000

# 3. 在浏览器中打开
# http://localhost:8000

# 4. 开始使用！
```

就这么简单！🎉

---

## 🆘 如果还有问题

如果独立 Web 应用也遇到 CORS 问题：

1. **确保使用本地服务器**（不要直接双击 HTML 文件）
2. **检查网络连接**
3. **查看浏览器控制台**（F12）的错误信息
4. **尝试使用不同的浏览器**（Chrome、Firefox、Edge）

---

## 📚 更多信息

- 独立 Web 应用详细说明：`standalone-web/README.md`
- Taro 版本修复记录：`TODO.md`

---

**享受摄影的乐趣！📷✨**
